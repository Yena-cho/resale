<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.finger.shinhandamoa.data.domain.mapper.InvoiceApplyMapper">
    <resultMap id="InvoiceApply" type="kr.co.finger.shinhandamoa.data.InvoiceApplyVO">
        <association property="xnotimasreq" resultMap="kr.co.finger.shinhandamoa.data.table.mapper.XnotimasreqMapper.BaseResultMap" />
    </resultMap>

    <sql id="select">
        SELECT
        <include refid="kr.co.finger.shinhandamoa.data.table.mapper.XnotimasreqMapper.Base_Column_List" />
    </sql>

    <sql id="from">
        FROM xnotimasreq XNOTIMASREQ
    </sql>

    <sql id="where">
        <where>
            <if test="filter.deliveryTypeCd != null">
                AND XNOTIMASREQ.DLVR_TYPE_CD=#{filter.deliveryTypeCd}
            </if>
            <if test="filter.statusCode != null">
                AND XNOTIMASREQ.REQST=#{filter.statusCode}
            </if>
            <if test="filter.processStatusCd != null">
                AND XNOTIMASREQ.RES_STS_CD=#{filter.processStatusCd}
            </if>
            <if test="filter.fileDt != null">
                AND XNOTIMASREQ.FILEDT=#{filter.fileDt}
            </if>
            <if test="filter.fileDtFrom != null">
                AND XNOTIMASREQ.FILEDT &gt;= #{filter.fileDtFrom}
            </if>
            <if test="filter.fileDtTo != null">
                AND XNOTIMASREQ.FILEDT &lt;= #{filter.fileDtTo}
            </if>
            <if test="filter.clientId != null">
                AND XNOTIMASREQ.CHACD = #{filter.clientId}
            </if>
        </where>
    </sql>

    <sql id="orderBy">
        <choose>
            <when test="filter.orderBy == 'createDate'">
                ORDER BY XNOTIMASREQ.REGDT DESC
            </when>
            <when test="filter.orderBy == 'recent'">
                ORDER BY XNOTIMASREQ.REGDT ASC
            </when>
            <otherwise>
                ORDER BY XNOTIMASREQ.REGDT ASC
            </otherwise>
        </choose>
    </sql>

    <select id="select" resultMap="InvoiceApply">
        <include refid="select" />
        <include refid="from" />
        <include refid="where" />
        <include refid="orderBy" />
    </select>

    <select id="selectForUpdate" resultMap="InvoiceApply">
        <include refid="select" />
        <include refid="from" />
        <include refid="where" />
        <include refid="orderBy" />
        FOR UPDATE
    </select>

    <select id="count" resultMap="InvoiceApply">
        SELECT COUNT(1)
        <include refid="from" />
        <include refid="where" />
    </select>

    <select id="get" resultMap="InvoiceApply">
        <include refid="select" />
        <include refid="from" />
        WHERE XNOTIMASREQ.NOTIMASREQCD=#{notimasreqcd}
    </select>
</mapper>
